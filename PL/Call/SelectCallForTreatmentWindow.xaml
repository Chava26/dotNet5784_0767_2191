<!--<Window x:Class="PL.Call.SelectCallForTreatmentWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Select Call for Treatment" Height="450" Width="800">
    <Grid>
        --><!-- Header --><!--
        <TextBlock Text="Select Call for Treatment" FontSize="20" FontWeight="Bold" HorizontalAlignment="Center" Margin="10" />

        --><!-- Open Calls List --><!--
        <DataGrid ItemsSource="{Binding OpenCalls}" AutoGenerateColumns="False" Margin="10,50,10,100" IsReadOnly="True">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="100" />
                <DataGridTextColumn Header="Type" Binding="{Binding CallType}" Width="150" />
                <DataGridTextColumn Header="Address" Binding="{Binding FullAddress}" Width="200" />
                <DataGridTextColumn Header="Description" Binding="{Binding Verbal_description}" Width="250" />
                <DataGridTextColumn Header="Distance (km)" Binding="{Binding CallDistance}" Width="100" />
                <DataGridTemplateColumn Header="Actions" Width="150">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Content="Select" Click="OnSelectCall" CommandParameter="{Binding}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>

        --><!-- Update Address Button --><!--
        <Button Content="Update Address" HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="10" Width="150" Click="OnUpdateAddress" />

        --><!-- Close Button --><!--
        <Button Content="Close" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="10" Width="100" Click="OnClose" />
    </Grid>
</Window>-->
<Window x:Class="PL.Call.SelectCallForTreatmentWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Select Call for Treatment" Height="450" Width="800"
        DataContext="{Binding RelativeSource={RelativeSource Self}}"
        Loaded="Window_Loaded"
        Closed="Window_Closed"
        WindowStartupLocation="CenterScreen">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock Grid.Row="0" 
                   Text="Select Call for Treatment" 
                   FontSize="20" 
                   FontWeight="Bold" 
                   HorizontalAlignment="Center" 
                   Margin="10" />

        <!-- Open Calls List -->
        <DataGrid Grid.Row="1" 
                  ItemsSource="{Binding OpenCalls}" 
                  AutoGenerateColumns="False" 
                  Margin="10" 
                  IsReadOnly="True"
                  CanUserReorderColumns="False"
                  CanUserResizeColumns="True"
                  GridLinesVisibility="Horizontal"
                  AlternatingRowBackground="LightGray">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="80" />
                <DataGridTextColumn Header="Type" Binding="{Binding CallType}" Width="120" />
                <DataGridTextColumn Header="Address" Binding="{Binding FullAddress}" Width="200" />
                <DataGridTextColumn Header="Description" Binding="{Binding Description}" Width="250" />
                <DataGridTextColumn Header="Distance (km)" Binding="{Binding DistanceFromVolunteer, StringFormat=F2}" Width="100" />
                <DataGridTextColumn Header="Open Time" Binding="{Binding OpenTime, StringFormat=dd/MM/yyyy HH:mm}" Width="130" />
                <DataGridTemplateColumn Header="Actions" Width="100">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Content="Select" 
                                    Click="OnSelectCall" 
                                    Background="Green" 
                                    Foreground="White"
                                    Padding="5,2"
                                    Margin="2" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Bottom Panel with Buttons -->
        <StackPanel Grid.Row="2" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Center" 
                    Margin="10">
            <Button Content="Update Address" 
                    Width="150" 
                    Height="35"
                    Margin="5"
                    Click="OnUpdateAddress" 
                    Background="LightBlue" />
            <Button Content="Close" 
                    Width="100" 
                    Height="35"
                    Margin="5"
                    Click="OnClose" 
                    Background="LightCoral" />
        </StackPanel>
    </Grid>
</Window>